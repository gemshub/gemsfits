## HOWTO build help

### Collect data

Please, copy here the html and image files in order to generate a new help database. 

Source HTML and image files must be all located in the subfolder `/Resources/doc/html` (no subfolders inside!).

There are two configuration files provided: `gfshelpconfig.toc`  and `gfshelpconfig.qhcp`. 

File `gfshelpconfig.toc` contains an XML code describing what the GEMFITS Help viewer shows in the "Contents" tab.
* To change "Contents", edit this file.
* To remove an upper-level section, locate it (it begins with the `<section>` and ends with the `</section>` and delete it or move in another place in the file. This has no effect on the actual content of the help database, only on access through the "Contents" tab.
* To add a lower-level entry for a (sub)section called "Title text" pointing to "link" (file or anchor name), add a line  `<section title="Title text" ref="link"> </section> ` at the appropriate level of hierarchy
* To delete an entry, locate it and delete the whole line (from `<section `... to `</section>`). 


### [Qt Help Project File](https://doc.qt.io/qt-6/qthelpproject.html)

A Qt help project `gfshelpconfig.qhp` collects all data necessary to generate a compressed help file. Along with the actual help data, like the table of contents, index keywords and help documents

A third configuration file, `gfshelpconfig.qhp` could be generated by the utility `tools/gfshelpconfig-qhp-generator`. 
This operation copies the content of `gfshelpconfig.toc` file into the section <toc> of the `gfshelpconfig.qhp`; then collects the list of all HTML files and image files present in the source directory into the <files> section; and then scans all HTML files for anchors collecting them into the <keywords> section of the `gfshelpconfig.qhp` file. 

`gfshelpconfig.qhp` must be refreshed if new HTML files or objects were added to the system.


```sh
./build/tools/gfshelpconfig-qhp-generator . 
```


### [Generating Qt Help](https://doc.qt.io/qt-6/qthelp-framework.html)

After specifying all the relevant information in `gfshelpconfig.qhp` file, it needs to be compiled by calling the `qhelpgenerator` utility program from Qt library.

To generate both the compressed help and the collection file in one go, use file `gfshelpconfig.qhcp` (the help collection project file).

Next, the `qhelpgenerator` utility program from Qt library is called with the `gfshelpconfig.qhcp` file name 
as command line parameter in order to generate (using the `gfshelpconfig.qhp` file) the help collection database 
file `gfshelp.qch` and its header `gfshelp.qhc`. 

```sh

./qhelpgenerator gfshelppconfig.qhcp -o gfshelp.qhc
```

Find qhelpgenerator on Ubuntu command

```sh
find / -iname qhelpgenerator
#or
find / -name qhelpgenerator 2>/dev/null
```


### Test Changes

To test the generated collection file independently of GUI, cd in the directory with the help database and start the 
Qt Assistant program by a command line like:

```sh
./assistant -collectionFile gfshelp.qhc 
```

### Install changes

To use the updated help database: locate files `gfshelp.qch` and `gfshelp.qhc` in the subfolder
`/Resources/doc/html`; move them to the subfolder `/Resources/help` (replacing older versions of these files); 
and start shell application.  

Last updated by SD on 12.08.2025
 
